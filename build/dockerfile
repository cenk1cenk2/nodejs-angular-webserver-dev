FROM node:11-alpine

WORKDIR /data/app

RUN apk --no-cache --no-progress update && \
    apk --no-cache --no-progress upgrade && \
    # Install tini supervisor
    apk --no-cache --no-progress tini && \
    # Update NPM
    npm install -g npm && \
    # Install Angular.io
    npm install -g @angular/cli --unsafe-perm

# Add start script.
ADD entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

ENTRYPOINT [ "/sbin/tini", "-v", "-e", "143", "--", "/entrypoint.sh" ]